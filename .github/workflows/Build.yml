name: Build packages

on:
  push:
  workflow_dispatch:
  
env:
  ANACONDA_TOKEN: ${{ secrets.ANACONDA_TOKEN }}
  ANACONDA_USER: ${{ secrets.ANACONDA_USER }}
  DEBIAN_FRONTEND: noninteractive
  GHA_MACHINE_TYPE: "n2-standard-4"
  APT_REQUIREMENTS: binutils build-essential csh curl git libgl1 pkg-config sudo wget

defaults:
  run:
    shell: bash

jobs:
  openfasoc-linux-py310:
    runs-on: ubuntu-latest
    env:
      PACKAGE: "misc/openfasoc"
      OS_NAME: "linux"
      PYTHON_VERSION: "3.10"      
    steps:
      - uses: actions/checkout@v3
      - uses: ./ci
      # - run: sudo ?apt -qqy update && apt -qqy install ${{ env.APT_REQUIREMENTS }} libxrender1
      # - uses: ./ci