# Use `conda-build-prepare` before building for a better version string.
{% set version = '%s_%04i_%s'|format(GIT_DESCRIBE_TAG, GIT_DESCRIBE_NUMBER|int, GIT_DESCRIBE_HASH or 'gUNKNOWN') %}

package:
  name: netgen
  version: {{ version }}

source:
   git_url: https://github.com/RTimothyEdwards/netgen
   git_rev: netgen-1.5
   patches:
     - remove-x11-requirement.patch       [osx]

build:
  # number: 201803050325
  number: {{ environ.get('DATE_NUM') }}
  # string: 20180305_0325
  string: {{ environ.get('DATE_STR') }}

requirements:
  build:
    - autoconf
    - automake
    - make
    - {{ compiler('c') }}
    - {{ cdt('xorg-x11-proto-devel') }}  # [linux]
    - {{ cdt('libx11-devel') }}  # [linux]
    - {{ cdt('libxau-devel') }}  # [linux]
    - {{ cdt('libxcb') }}  # [linux]
  host:
    - python
    - tk
  run:
    - python

test:
  commands:
    - netgen -batch quit
  downstreams:
    - openlane

about:
  home: http://opencircuitdesign.com/netgen/
  license_file: Copying
  summary: "Netgen is a tool for comparing netlists, a process known as LVS, which stands for \"Layout vs. Schematic\". This is an important step in the integrated circuit design flow, ensuring that the geometry that has been laid out matches the expected circuit. Very small circuits can bypass this step by confirming circuit operation through extraction and simulation. Very large digital circuits are usually generated by tools from high-level descriptions, using compilers that ensure the correct layout geometry. The greatest need for LVS is in large analog or mixed-signal circuits that cannot be simulated in reasonable time. Even for small circuits, LVS can be done much faster than simulation, and provides feedback that makes it easier to find an error than does a simulation."
